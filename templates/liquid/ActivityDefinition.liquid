<div>
    <table class="grid dict">

        <!--TITLE-->
        {% if ActivityDefinition.title.exists() %}
        <tr>
            <th scope="row"><b>eCQM title: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.title.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--eCQM ID-->
        {% if ActivityDefinition.id.exists() %}
        <tr>
            <th scope="row"><b>eCQM ID: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.id}}</td>
        </tr>
        {% endif %}

        <!--eCQM version number-->
        {% if ActivityDefinition.version.exists() %}
        <tr>
            <th scope="row"><b>eCQM version number: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.version}}</td>
        </tr>
        {% endif %}

        <!--Measurement period-->
        {% if ActivityDefinition.effectivePeriod.exists() %}
        <tr>
            <th scope="row"><b>Measurement period: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.effectivePeriod.start}}..{{ActivityDefinition.effectivePeriod.end}}</td>
        </tr>
        {% endif %}

        <!--Status-->
        {% if ActivityDefinition.status.exists() %}
        <tr>
            <th scope="row"><b>Status: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.status.value}}</td>
        </tr>
        {% endif %}

        <!--Experimental-->
        {% if ActivityDefinition.experimental.exists() %}
        <tr>
            <th scope="row"><b>Experimental: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.experimental.value}}</td>
        </tr>
        {% endif %}

        <!--Date (date last changed)-->
        {% if ActivityDefinition.date.exists() %}
        <tr>
            <th scope="row"><b>Date (date last changed): </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.date}}</td>
        </tr>
        {% endif %}

        <!--Approval date (when the measure was approved by the publisher)-->
        {% if ActivityDefinition.approvalDate.exists() %}
        <tr>
            <th scope="row"><b>Approval date (when the measure was approved by the publisher): </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.approvalDate}}</td>
        </tr>
        {% endif %}

        <!--Last review date (when the measure was last reviewed)-->
        {% if ActivityDefinition.lastReviewDate.exists() %}
        <tr>
            <th scope="row"><b>Last review date (when the measure was last reviewed): </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.lastReviewDate}}</td>
        </tr>
        {% endif %}

        <!--Short Name-->
        {% if ActivityDefinition.name.exists() %}
        <tr>
            <th scope="row"><b>Short Name: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.name}}</td>
        </tr>
        {% endif %}

        <!--Measure steward-->
        {% if ActivityDefinition.publisher.exists() %}
        <tr>
            <th scope="row"><b>Measure steward: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.publisher.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Measure developer-->
        {% if ActivityDefinition.author.exists() %}
        <tr>
            <th scope="row"><b>Measure developer: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.author.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Endorsed by-->
        {% if ActivityDefinition.endorser.exists() %}
        <tr>
            <th scope="row"><b>Endorsed by: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.endorser.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Description-->
        {% if ActivityDefinition.description.exists() %}
        <tr>
            <th scope="row"><b>Description: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.description.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Copyright-->
        {% if ActivityDefinition.copyright.exists() %}
        <tr>
            <th scope="row"><b>Copyright: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.copyright.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Disclaimer-->
        {% if ActivityDefinition.disclaimer.exists() %}
        <tr>
            <th scope="row"><b>Disclaimer: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.disclaimer.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Measure scoring-->
        {% if ActivityDefinition.scoring.exists() %}
        <tr>
            <th scope="row"><b>Measure scoring: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.scoring.text}}</td>
        </tr>
        {% endif %}

        <!--Measure type-->
        {% if ActivityDefinition.type.exists() %}
        <tr>
            <th scope="row"><b>Measure type: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.type.text}}</td>
        </tr>
        {% endif %}

        <!--Stratification-->
        {% if ActivityDefinition.stratifier.exists() %}
        <tr>
            <th scope="row"><b>Stratification: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.stratifier.criteria.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Risk adjustment-->
        {% if ActivityDefinition.riskAdjustment.exists() %}
        <tr>
            <th scope="row"><b>Risk adjustment: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.riskAdjustment.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Rate aggregation-->
        {% if ActivityDefinition.rateAggregation.exists() %}
        <tr>
            <th scope="row"><b>Rate aggregation: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.rateAggregation.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Rationale-->
        {% if ActivityDefinition.rationale.exists() %}
        <tr>
            <th scope="row"><b>Rationale: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.rationale.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Clinical recommendation statement-->
        {% if ActivityDefinition.clinicalRecommendation.exists() %}
        <tr>
            <th scope="row"><b>Clinical recommendation statement: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.clinicalRecommendation.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Improvement notation-->
        {% if ActivityDefinition.improvementNotation.exists() %}
        <tr>
            <th scope="row"><b>Improvement notation: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.improvementNotation.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Reference-->
        {% if ActivityDefinition.relatedArtifact.exists() %}
        <tr>
            <th scope="row"><b>Reference: </b></th>
            <td style="padding-left: 4px;">
                {% for artifact in ActivityDefinition.relatedArtifact %}
                {% if artifact.type == 'citation' %}
                <p><b>Citation: </b>{{artifact.citation}} <br/><a href="{{artifact.url}}">{{artifact.url}}</a></p>
                {% endif %}
                {% endfor %}
            </td>
        </tr>
        {% endif %}

        <!--Initial Population-->
        {% if ActivityDefinition.population.exists() %}
        <tr>
            <th scope="row"><b>Initial Population: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.population.criteria.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Denominator-->
        {% if ActivityDefinition.denominator.exists() %}
        <tr>
            <th scope="row"><b>Denominator: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.denominator.criteria.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Denominator exclusions-->
        {% if ActivityDefinition.denominatorExclusions.exists() %}
        <tr>
            <th scope="row"><b>Denominator exclusions: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.denominatorExclusions.criteria.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Measure observations-->
        {% if ActivityDefinition.measureObservations.exists() %}
        <tr>
            <th scope="row"><b>Measure observations: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.measureObservations.criteria.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Numerator-->
        {% if ActivityDefinition.numerator.exists() %}
        <tr>
            <th scope="row"><b>Numerator: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.numerator.criteria.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Numerator exclusions-->
        {% if ActivityDefinition.numeratorExclusions.exists() %}
        <tr>
            <th scope="row"><b>Numerator exclusions: </b></th>
            <td style="padding-left: 4px;">{{ActivityDefinition.numeratorExclusions.criteria.escape('html')}}</td>
        </tr>
        {% endif %}

        <!--Supplemental data elements-->
        {% if ActivityDefinition.supplementalData.exists() %}
        <tr>
            <th scope="row"><b>Supplemental data elements: </b></th>
            <td style="padding-left: 4px;">
                <table class="grid-dict">
                    <tr>
                        <th><b>Code</b></th>
                        <th><b>Value</b></th>
                        <th><b>Display</b></th>
                    </tr>
                    {% for supplementalData in ActivityDefinition.supplementalData %}
                    <tr>
                        <td>{{ supplementalData.criteria.coding.first().code }}</td>
                        <td>{{ (supplementalData.value as CodeableConcept).coding.first().code }}</td>
                        <td>{{ (supplementalData.value as CodeableConcept).coding.first().display.escape('html') }}</td>
                    </tr>
                    {% endfor %}
                </table>
            </td>
        </tr>
        {% endif %}

        <!--Libraries-->
        {% if ActivityDefinition.library.exists() %}
        <tr>
            <th scope="row"><b>Libraries: </b></th>
            <td style="padding-left: 4px;">
                <table class="grid-dict">
                    {% for library in ActivityDefinition.library %}
                    <tr>
                        <td>{{ library }}</td>
                    </tr>
                    {% endfor %}
                </table>
            </td>
        </tr>
        {% endif %}

        <!--Related Artifact Dependencies-->
        {% if ActivityDefinition.relatedArtifact.exists() %}
        <tr>
            <th scope="row"><b>Related Artifact Dependencies: </b></th>
            <td style="padding-left: 4px;">
                <ul>
                    {% for artifact in ActivityDefinition.relatedArtifact %}
                    {% if artifact.type == 'depends-on' %}
                    <li>{{ artifact.resource }}</li>
                    {% endif %}
                    {% endfor %}
                </ul>
            </td>
        </tr>
        {% endif %}

        <!--Parameters-->
        <!--Data requirements-->
        <!--Direct reference codes-->
        {% if ActivityDefinition.code.exists() %}
        <tr>
            <th scope="row"><b>Direct reference codes: </b></th>
            <td style="padding-left: 4px;">
                {% if ActivityDefinition.code.coding.exists() %}
                {% for coding in ActivityDefinition.code.coding %}
                {% if coding.system.exists() %}
                <p><b>system: </b><span>{{ coding.system }}</span></p>
                {% endif %}
                {% if coding.code.exists() %}
                <p><b>code: </b><span>{{ coding.code }}</span></p>
                {% endif %}
                {% if coding.display.exists() %}
                <p><b>display: </b><span>{{ coding.display.escape('html') }}</span></p>
                {% endif %}
                {% endfor %}
                {% endif %}
                {% if ActivityDefinition.code.coding.exists().not and ActivityDefinition.code.text.exists() %}
                {{ ActivityDefinition.code.text }}
                {% endif %}
            </td>
        </tr>
        {% endif %}

        <!--Logic Definitions-->
        {% if ActivityDefinition.logic.exists() %}
        <tr>
            <th scope="row"><b>Logic Definitions: </b></th>
            <td style="padding-left: 4px;">{{ ActivityDefinition.logic }}</td>
        </tr>
        {% endif %}

        <!--Derived From-->
        {% if ActivityDefinition.relatedArtifact.where(type = 'derived-from').exists() %}
        <tr>
            <th scope="row"><b>Derived From: </b></th>
            <td style="padding-left: 4px;">
                <ul>
                    {% for artifact in ActivityDefinition.relatedArtifact.where(type = 'derived-from') %}
                    <li>{{ artifact.resource }}</li>
                    {% endfor %}
                </ul>
            </td>
        </tr>
        {% endif %}

        <!--Successor-->
        {% if ActivityDefinition.relatedArtifact.where(type = 'successor').exists() %}
        <tr>
            <th scope="row"><b>Successor: </b></th>
            <td style="padding-left: 4px;">
                <ul>
                    {% for artifact in ActivityDefinition.relatedArtifact.where(type = 'successor') %}
                    <li>{{ artifact.resource }}</li>
                    {% endfor %}
                </ul>
            </td>
        </tr>
        {% endif %}

        <!--Predecessor-->
        {% if ActivityDefinition.relatedArtifact.where(type = 'predecessor').exists() %}
        <tr>
            <th scope="row"><b>Predecessor: </b></th>
            <td style="padding-left: 4px;">
                <ul>
                    {% for artifact in ActivityDefinition.relatedArtifact.where(type = 'predecessor') %}
                    <li>{{ artifact.resource }}</li>
                    {% endfor %}
                </ul>
            </td>
        </tr>
        {% endif %}

        <!--Kind-->
        {% if ActivityDefinition.kind.exists() %}
        <tr>
            <th scope="row"><b>Kind: </b></th>
            <td style="padding-left: 4px;">{{ ActivityDefinition.kind.value }}</td>
        </tr>
        {% endif %}

        <!--Profile-->
        {% if ActivityDefinition.profile.exists() %}
        <tr>
            <th scope="row"><b>Profile: </b></th>
            <td style="padding-left: 4px;">{{ ActivityDefinition.profile.value }}</td>
        </tr>
        {% endif %}

        <!--Intent-->
        {% if ActivityDefinition.intent.exists() %}
        <tr>
            <th scope="row"><b>Intent: </b></th>
            <td style="padding-left: 4px;">{{ ActivityDefinition.intent.value }}</td>
        </tr>
        {% endif %}

        <!--Priority-->
        {% if ActivityDefinition.priority.exists() %}
        <tr>
            <th scope="row"><b>Priority: </b></th>
            <td style="padding-left: 4px;">{{ ActivityDefinition.priority.value }}</td>
        </tr>
        {% endif %}

        <!--doNotPerform-->
        {% if ActivityDefinition.doNotPerform.exists() %}
        <tr>
            <th scope="row"><b>doNotPerform: </b></th>
            <td style="padding-left: 4px;">{{ ActivityDefinition.doNotPerform.value }}</td>
        </tr>
        {% endif %}

        <!--Product-->
        {% if ActivityDefinition.product.exists() %}
        <tr>
            <th scope="row"><b>Product: </b></th>
            {% if ActivityDefinition.product is CodeableConcept %}
            <td style="padding-left: 4px;">
                {% if ActivityDefinition.product.coding.exists() %}
                {% for coding in ActivityDefinition.product.coding %}
                {% if coding.system.exists() %}
                <p><b>system: </b><span>{{ coding.system }}</span></p>
                {% endif %}
                {% if coding.code.exists() %}
                <p><b>code: </b><span>{{ coding.code }}</span></p>
                {% endif %}
                {% if coding.display.exists() %}
                <p><b>display: </b><span>{{ coding.display.escape('html') }}</span></p>
                {% endif %}
                {% endfor %}
                {% endif %}
                {% if ActivityDefinition.product.coding.exists().not and ActivityDefinition.product.text.exists() %}
                {{ ActivityDefinition.product.text }}
                {% endif %}
            </td>
            {% endif %}
            {% if ActivityDefinition.product is Reference %}
            <td style="padding-left: 4px;">
                {% if ActivityDefinition.product.reference.exists() %}
                <p><b>reference: </b><span>{{ ActivityDefinition.product.reference }}</span></p>
                {% endif %}
                {% if ActivityDefinition.product.type.exists() %}
                <p><b>type: </b><span>{{ ActivityDefinition.product.type }}</span></p>
                {% endif %}
                {% if ActivityDefinition.product.display.exists() %}
                <p><b>code: </b><span>{{ ActivityDefinition.product.display.escape('html') }}</span></p>
                {% endif %}
            </td>
            {% endif %}
        </tr>
        {% endif %}

        <!--Quantity-->
        {% if ActivityDefinition.quantity.exists() %}
        <tr>
            <th scope="row"><b>Quantity: </b></th>
            <td style="padding-left: 4px;">{{ ActivityDefinition.quantity.value }} <i>({{ ActivityDefinition.quantity.unit.escape('html') }})</i><br/></td>
        </tr>
        {% endif %}

        <!--Body Site(s)-->
        {% if ActivityDefinition.bodySite.exists() %}
        <tr>
            <th scope="row"><b>Body Site(s): </b></th>
            <td style="padding-left: 4px;">
                <table class="grid-dict">
                    <tr>
                        <th><b>code</b></th>
                        <th><b>display</b></th>
                    </tr>
                    {% for bodySite in ActivityDefinition.bodySite %}
                    <tr>
                        <td>{{ bodySite.coding.first().code }}</td>
                        <td>{{ bodySite.coding.first().display.escape('html') }}</td>
                    </tr>
                    {% endfor %}
                </table>
            </td>
        </tr>
        {% endif %}

        <!--Dynamic Values-->
        {% if ActivityDefinition.dynamicValue.exists() %}
        <tr>
            <th scope="row"><b>Dynamic Values: </b></th>
            <td style="padding-left: 4px;">
                <ul>
                    {% for dynamicValue in ActivityDefinition.dynamicValue %}
                    <li>{{ dynamicValue.path }}: <i>({{ dynamicValue.expression.expression.escape('html') }})</i><br/></li>
                    {% endfor %}
                </ul>
            </td>
        </tr>
        {% endif %}
    </table>
</div>
